{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>{% block title %}Bridge Online School - Learn Bridge Online{% endblock %}</title>
  <meta name="description" content="{% block description %}Learn bridge online with expert teachers. Bridge Online School connects the best teachers with students for personalized bridge lessons and courses.{% endblock %}">
  <meta name="keywords" content="{% block keywords %}bridge lessons, bridge school, online bridge, bridge courses, learn bridge, bridge teachers, card games{% endblock %}">

  <!-- Favicons -->
  <link href="{% static 'assets/img/logo/logo.ico' %}" rel="icon" type="image/x-icon">
  <link href="{% static 'assets/img/logo/logo.ico' %}" rel="shortcut icon" type="image/x-icon">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">
  
  <!-- Additional favicon sizes for better browser support -->
  <link href="{% static 'assets/img/logo/logo.ico' %}" rel="icon" sizes="16x16" type="image/x-icon">
  <link href="{% static 'assets/img/logo/logo.ico' %}" rel="icon" sizes="32x32" type="image/x-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Consulting
  * Template URL: https://bootstrapmade.com/bootstrap-consulting-website-template/
  * Updated: May 01 2025 with Bootstrap v5.3.5
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

    {% include 'navbar.html'%}

    <!-- Messages Display -->
    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% block content %}
    {% endblock %}

  <footer id="footer" class="footer light-background">

    <div class="container">
      <div class="row gy-3">
        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-geo-alt icon"></i>
          <div class="address">
            <h4>Address</h4>
            <p>A108 Adam Street</p>
            <p>New York, NY 535022</p>
            <p></p>
          </div>

        </div>

        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-telephone icon"></i>
          <div>
            <h4>Contact</h4>
            <p>
              <strong>Phone:</strong> <span>+1 5589 55488 55</span><br>
              <strong>Email:</strong> <span>info@example.com</span><br>
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-clock icon"></i>
          <div>
            <h4>Opening Hours</h4>
            <p>
              <strong>Mon-Sat:</strong> <span>11AM - 23PM</span><br>
              <strong>Sunday</strong>: <span>Closed</span>
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6">
          <h4>Follow Us</h4>
          <div class="social-links d-flex">
            <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
            <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
            <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
            <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">Consulting.</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

  <!-- Shopping Cart Count Update Script -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
      updateCartCount();
      
      function updateCartCount() {
          // Get cart count from localStorage
          const cart = JSON.parse(localStorage.getItem('bridgeSchoolCart') || '{}');
          const totalItems = Object.values(cart).reduce((total, item) => total + (item.quantity || 0), 0);
          
          const cartIconLink = document.getElementById('cart-icon-link');
          const cartBadge = document.getElementById('cart-badge');
          
          if (cartIconLink && cartBadge) {
              cartBadge.textContent = totalItems;
              cartBadge.style.display = totalItems > 0 ? 'flex' : 'none';
              // Show/hide entire cart icon based on cart contents
              if (totalItems > 0) {
                  cartIconLink.style.display = 'flex';
                  cartIconLink.style.alignItems = 'center';
                  cartIconLink.style.opacity = '1';
              } else {
                  cartIconLink.style.display = 'none';
                  cartIconLink.style.opacity = '0';
              }
          }
      }
      
      // Make updateCartCount available globally for other scripts
      window.updateCartCount = updateCartCount;
      
      // Listen for localStorage changes to update cart count across tabs
      window.addEventListener('storage', function(e) {
          if (e.key === 'bridgeSchoolCart') {
              updateCartCount();
          }
      });
      
      // Universal cart test function (available on all pages)
      window.testCart = function() {
          console.log('=== Testing Cart Functionality ===');
          
          // Test 1: localStorage support
          console.log('1. Testing localStorage...');
          try {
              localStorage.setItem('test', 'value');
              const testValue = localStorage.getItem('test');
              localStorage.removeItem('test');
              if (testValue === 'value') {
                  console.log('✅ localStorage: WORKING');
              } else {
                  console.log('❌ localStorage: FAILED - value mismatch');
                  return;
              }
          } catch (e) {
              console.log('❌ localStorage: FAILED -', e.message);
              return;
          }
          
          // Test 2: Cart elements existence
          console.log('2. Testing cart elements...');
          const cartIconLink = document.getElementById('cart-icon-link');
          const cartBadge = document.getElementById('cart-badge');
          
          if (cartIconLink && cartBadge) {
              console.log('✅ Cart elements: FOUND');
              console.log('  - Cart icon link:', cartIconLink);
              console.log('  - Cart badge:', cartBadge);
          } else {
              console.log('❌ Cart elements: MISSING');
              console.log('  - Cart icon link:', cartIconLink);
              console.log('  - Cart badge:', cartBadge);
              return;
          }
          
          // Test 3: updateCartCount function
          console.log('3. Testing updateCartCount function...');
          if (typeof window.updateCartCount === 'function') {
              console.log('✅ updateCartCount: AVAILABLE');
          } else {
              console.log('❌ updateCartCount: NOT AVAILABLE');
          }
          
          // Test 4: Create test cart and update icon
          console.log('4. Testing cart creation...');
          try {
              const testCart = {
                  '999': {
                      id: 999,
                      first_name: 'Test',
                      last_name: 'Teacher',
                      title: 'Test Title',
                      lesson_price: 50,
                      avatar_url: '/test.jpg',
                      quantity: 2,
                      notes: '',
                      communication_method: ''
                  }
              };
              
              localStorage.setItem('bridgeSchoolCart', JSON.stringify(testCart));
              console.log('✅ Test cart saved to localStorage');
              
              // Update cart display
              if (window.updateCartCount) {
                  window.updateCartCount();
                  console.log('✅ Cart count updated');
              }
              
              // Check if cart icon is now visible
              const cartIconStyle = window.getComputedStyle(cartIconLink);
              const isVisible = cartIconStyle.display !== 'none';
              
              if (isVisible) {
                  console.log('✅ Cart icon: NOW VISIBLE');
                  console.log('✅ Badge text:', cartBadge.textContent);
              } else {
                  console.log('❌ Cart icon: STILL HIDDEN');
                  console.log('  - Display style:', cartIconStyle.display);
              }
              
              console.log('=== Test completed! Check navbar for cart icon (should show "2") ===');
              
          } catch (e) {
              console.log('❌ Cart creation: FAILED -', e.message);
          }
      };
      
      // Clear test cart function
      window.clearTestCart = function() {
          localStorage.removeItem('bridgeSchoolCart');
          if (window.updateCartCount) {
              window.updateCartCount();
          }
          console.log('Test cart cleared');
      };
      
      // Test purchase button functionality
      window.testPurchaseButton = function() {
          console.log('=== Testing Purchase Button ===');
          
          const buttons = document.querySelectorAll('.add-to-cart-btn');
          console.log('Found purchase buttons:', buttons.length);
          
          if (buttons.length === 0) {
              console.log('❌ No purchase buttons found on this page');
              console.log('  - Make sure you are on a teacher detail page');
              return;
          }
          
          buttons.forEach((button, index) => {
              console.log(`Button ${index + 1}:`);
              console.log('  - Element:', button);
              console.log('  - Teacher ID:', button.dataset.teacherId);
              console.log('  - Teacher Name:', button.dataset.teacherFirstname, button.dataset.teacherLastname);
              console.log('  - Price:', button.dataset.teacherPrice);
              console.log('  - Avatar:', button.dataset.teacherAvatar);
              
              // Check if button is clickable
              const style = window.getComputedStyle(button);
              console.log('  - Pointer events:', style.pointerEvents);
              console.log('  - Display:', style.display);
              console.log('  - Visibility:', style.visibility);
              
              if (style.pointerEvents === 'none') {
                  console.log('  ❌ Button not clickable (pointer-events: none)');
              } else {
                  console.log('  ✅ Button should be clickable');
              }
          });
          
          console.log('=== Test completed ===');
      };
      
      console.log('Cart test functions available:');
      console.log('- window.testCart() - Test cart functionality');
      console.log('- window.clearTestCart() - Clear test cart');
      console.log('- window.testPurchaseButton() - Test purchase buttons (teacher pages only)');
  });
  </script>

</body>

</html>